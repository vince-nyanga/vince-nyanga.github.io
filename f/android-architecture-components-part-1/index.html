<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.17.2 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Android Architecture Components - Part 1 | Vincent (Hones) Nyanga</title>
<meta name="description" content="At Google I/O 2017 Android Architecture Components were introduced. These components are building blocks that work together to implement an app architecture that is easy to maintain and avoids numerous pain points. They help developers:">


  <meta name="author" content="Vincent Nyanga">


<meta property="og:type" content="article">
<meta property="og:locale" content="en_ZA">
<meta property="og:site_name" content="Vincent (Hones) Nyanga">
<meta property="og:title" content="Android Architecture Components - Part 1">
<meta property="og:url" content="http://localhost:4000/android-architecture-components-part-1/">


  <meta property="og:description" content="At Google I/O 2017 Android Architecture Components were introduced. These components are building blocks that work together to implement an app architecture that is easy to maintain and avoids numerous pain points. They help developers:">







  <meta property="article:published_time" content="2017-06-13T00:00:00+02:00">





  

  


<link rel="canonical" href="http://localhost:4000/android-architecture-components-part-1/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Vincent Nyanga",
      "url": "http://localhost:4000/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Vincent (Hones) Nyanga Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/img/logo.png" alt=""></a>
        
        <a class="site-title" href="/">
          Vincent (Hones) Nyanga
          <span class="site-subtitle">Personal blog</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/year-archive/" >Posts</a>
            </li><li class="masthead__menu-item">
              <a href="/weekly-lessons/" >Weekly Lessons</a>
            </li><li class="masthead__menu-item">
              <a href="/about/" >About</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="https://avatars2.githubusercontent.com/u/13013852?v=3&u=0e1bc9da031c3b0fed315dcf2869b3cc38b7e232&s=400" alt="Vincent Nyanga" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Vincent Nyanga</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Software engineer</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Johannesburg, ZA</span>
        </li>
      

      
        
          
            <li><a href="https://www.linkedin.com/in/vincentnyanga/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn</a></li>
          
        
          
            <li><a href="https://github.com/vince-nyanga/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Android Architecture Components - Part 1">
    <meta itemprop="description" content="At Google I/O 2017 Android Architecture Components were introduced. These components are building blocks that work together to implement an app architecture that is easy to maintain and avoids numerous pain points. They help developers:">
    <meta itemprop="datePublished" content="June 13, 2017">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Android Architecture Components - Part 1
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  6 minute read

</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>At Google I/O 2017 Android Architecture Components were introduced. These components are building blocks that work together to implement an app architecture that is easy to maintain and avoids numerous pain points. They help developers:</p>

<ul>
  <li>Manage activity and fragment lifecycles to avoid memory leaks, which are a real pain.</li>
  <li>Persist POJOs to a SQLite database without much of a hussle.</li>
</ul>

<p>In this post I’m going to talk about a few of those components which are LiveData, Room and ViewModel. You can check out the rest of the components <a href="https://developer.android.com/topic/libraries/architecture/index.html">here</a>.</p>

<h2 id="livedata">LiveData</h2>

<p>LiveData is an observable data holder class that is aware of the lifecycle. When the UI susbcribes to the changes in the data held by a LiveData class, it (LiveData) ensures that :</p>

<ul>
  <li>The observer gets data updates if the lifecycle is in active state. This helps avoid trying to update the UI when it’s not visible.</li>
  <li>The observer will be removed when the LifecycleOwner (Activity/Fragment) is destroyed to avoid memory leaks</li>
  <li>The observer will get the latest data when the Lifecycle owner is restarted.</li>
</ul>

<p>LiveData observers need to be tied to a lifecycle owner like Activity or Fragment. With LiveData there won’t be a need to implement all those cumbersome lifecycle methods like <code class="highlighter-rouge">onResume()</code>, <code class="highlighter-rouge">onPause()</code>, <code class="highlighter-rouge">onDestroy()</code> etc.</p>

<h2 id="viewmodel">ViewModel</h2>

<p>ViewModel is a class that contains UI data for an Activity or a Fragment. It’s purpose is to separate business logic from the UI. The cool thing about the ViewModel class is that it is retained for as long as the the scope of its Activity or Fragment is alive. It actually survives configuration changes so when the Activity is recreated due to configuration changes the data does not get lost. Wrapping UI data stored in a ViewModel with LiveData will give you an observable lifecycle-aware data that survives configuration changes. Cool!!!</p>

<h2 id="room">Room</h2>

<p>The Room library contains components that provide an object-mapping layer that allows smooth access to the database. There are three major compnents in the Room library:</p>

<ul>
  <li><strong>Entity</strong>: An Entity represents the data for a single database row that is constructed using an annotated POJO. Each component persists in its own table.</li>
  <li><strong>DAO (Data Access Object)</strong>: This defines methods that access the database using annotaions to bind SQL to each method.</li>
  <li><strong>Database</strong>: This is a holder class that makes use of annotations to define the list of entities and the database version. It contains the list of DAOs and also acts as the main access point to the underlying database connection.</li>
</ul>

<h1 id="lets-get-started">Let’s get started</h1>

<p>In this series of posts we will create a simple task management app (I love task management) that makes use of the components discussed above. The app will have the following entities:</p>

<ul>
  <li><strong>Task</strong>: An summary of related stuff that the user needs to do.</li>
  <li><strong>TaskItem</strong>: An individual item that belongs to a particular Task</li>
</ul>

<p>Check out the complete code on <a href="https://github.com/vince-nyanga/yo-tasks">github</a> in order for you to see the gradle dependencies that I used as well as other classes that I won’t discuss about in this post. We will start by defining our entities:</p>

<h3 id="task">Task</h3>

<p>The following code is for the Task entity:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span><span class="o">(</span><span class="n">tableName</span> <span class="o">=</span> <span class="s">"tasks"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Task</span> <span class="o">{</span>
    <span class="nd">@PrimaryKey</span><span class="o">(</span><span class="n">autoGenerate</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Date</span> <span class="n">dateCreated</span><span class="o">;</span>


    <span class="kd">public</span> <span class="nf">Task</span><span class="o">()</span> <span class="o">{</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getId</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">id</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setId</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">Date</span> <span class="nf">getDateCreated</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">dateCreated</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setDateCreated</span><span class="o">(</span><span class="nc">Date</span> <span class="n">dateCreated</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">dateCreated</span> <span class="o">=</span> <span class="n">dateCreated</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<p>As you can see we have an <code class="highlighter-rouge">@Entity</code> annotation that takes in the <code class="highlighter-rouge">tableName</code>. The table name parameter is the name of the table in the SQLite database. The <code class="highlighter-rouge">id</code> field is the primary key in our table.</p>

<h3 id="taskitem">TaskItem</h3>

<p>Here is the code for the TaskItem:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span><span class="o">(</span><span class="n">tableName</span> <span class="o">=</span> <span class="s">"items"</span><span class="o">,</span>
<span class="n">foreignKeys</span> <span class="o">=</span> <span class="o">{</span>
        <span class="nd">@ForeignKey</span><span class="o">(</span><span class="n">entity</span> <span class="o">=</span> <span class="nc">Task</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
        <span class="n">parentColumns</span> <span class="o">=</span> <span class="s">"id"</span><span class="o">,</span>
        <span class="n">childColumns</span> <span class="o">=</span> <span class="s">"taskId"</span><span class="o">,</span>
        <span class="n">onDelete</span> <span class="o">=</span> <span class="no">CASCADE</span><span class="o">)},</span>
<span class="n">indices</span> <span class="o">=</span> <span class="o">{</span>
        <span class="nd">@Index</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"taskId"</span><span class="o">)</span>
<span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TaskItem</span> <span class="o">{</span>

    <span class="nd">@PrimaryKey</span><span class="o">(</span><span class="n">autoGenerate</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">taskId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">done</span><span class="o">;</span>


    <span class="kd">public</span> <span class="nf">TaskItem</span><span class="o">(){}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getId</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">id</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setId</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getTaskId</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">taskId</span><span class="o">;</span>
    <span class="o">}</span>


    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setTaskId</span><span class="o">(</span><span class="kt">int</span> <span class="n">taskId</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">taskId</span> <span class="o">=</span> <span class="n">taskId</span><span class="o">;</span>
    <span class="o">}</span>


    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>


    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isDone</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">done</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setDone</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">done</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">done</span> <span class="o">=</span> <span class="n">done</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>We have defined the foreign key <code class="highlighter-rouge">taskId</code> as well as an index for the TaskItem entity. Other than that everything else is the same as the Task entity above.</p>

<p>Now let us create the DAOs for Task and TaskItem entities respectively:</p>

<h3 id="taskdao">TaskDao</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Dao</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">TaskDao</span> <span class="o">{</span>

    <span class="nd">@Query</span><span class="o">(</span><span class="s">"SELECT * FROM tasks"</span><span class="o">)</span>
    <span class="nc">LiveData</span><span class="o">&lt;</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Task</span><span class="o">&gt;&gt;</span> <span class="nf">loadTasks</span><span class="o">();</span>

    <span class="nd">@Query</span><span class="o">(</span><span class="s">"SELECT * FROM tasks WHERE id = :id"</span><span class="o">)</span>
    <span class="nc">LiveData</span><span class="o">&lt;</span><span class="nc">Task</span><span class="o">&gt;</span> <span class="nf">getTaskById</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">);</span>

    <span class="nd">@Insert</span>
    <span class="kt">void</span> <span class="nf">insert</span> <span class="o">(</span><span class="nc">Task</span> <span class="n">task</span><span class="o">);</span>

    <span class="nd">@Update</span>
    <span class="kt">void</span> <span class="nf">update</span><span class="o">(</span><span class="nc">Task</span> <span class="n">task</span><span class="o">);</span>

    <span class="nd">@Delete</span>
    <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="nc">Task</span> <span class="n">task</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>This interface defines the methods we will use to access the database and perform respective operations. The operations are self-explanatory. Notice the SQL query statements above <code class="highlighter-rouge">loadTasks()</code> and <code class="highlighter-rouge">getTaskById()</code>. The queries return LiveData objects in order for user to harness the power of LiveData explained above.</p>

<h3 id="taskitemdao">TaskItemDao</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Dao</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">TaskItemDao</span> <span class="o">{</span>

    <span class="nd">@Query</span><span class="o">(</span><span class="s">"SELECT * FROM items WHERE taskId = :taskId"</span><span class="o">)</span>
    <span class="nc">LiveData</span><span class="o">&lt;</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">TaskItem</span><span class="o">&gt;&gt;</span> <span class="nf">loadItems</span><span class="o">(</span><span class="kt">int</span> <span class="n">taskId</span><span class="o">);</span>

    <span class="nd">@Query</span><span class="o">(</span><span class="s">"SELECT * from items WHERE id = :id"</span><span class="o">)</span>
    <span class="nc">LiveData</span><span class="o">&lt;</span><span class="nc">TaskItem</span><span class="o">&gt;</span> <span class="nf">getItemById</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">);</span>

    <span class="nd">@Insert</span>
    <span class="kt">void</span> <span class="nf">insert</span><span class="o">(</span><span class="nc">TaskItem</span> <span class="n">item</span><span class="o">);</span>

    <span class="nd">@Update</span>
    <span class="kt">void</span> <span class="nf">update</span><span class="o">(</span><span class="nc">TaskItem</span> <span class="n">item</span><span class="o">);</span>

    <span class="nd">@Delete</span>
    <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="nc">TaskItem</span> <span class="n">item</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="type-converters">Type Converters</h3>

<p>As you know there are objects that cannot be stored in a SQLite database as-is. Our entities contain two such objects - <code class="highlighter-rouge">Date</code> and <code class="highlighter-rouge">boolean</code>. In order for us to be able to store these types in our database we need to convert them into types that the SQLite database will manage to store. When they get back from the database we want them to be converted back into the types that are defined in our entities. Below is the code for <code class="highlighter-rouge">DateConverter</code> that converts a <code class="highlighter-rouge">java.util.Date</code> object into a <code class="highlighter-rouge">Long</code> as well as a <code class="highlighter-rouge">BooleanConverter</code> that converts a <code class="highlighter-rouge">boolean</code> into an integer (1 for <code class="highlighter-rouge">true</code> and 0 for <code class="highlighter-rouge">false</code>)</p>

<h4 id="dateconverter">DateConverter</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DateConverter</span> <span class="o">{</span>

    <span class="nd">@TypeConverter</span>
    <span class="kd">public</span>  <span class="kd">static</span> <span class="nc">Date</span> <span class="nf">toDate</span><span class="o">(</span><span class="nc">Long</span> <span class="n">timestamp</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">timestamp</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="k">new</span> <span class="nc">Date</span><span class="o">(</span><span class="n">timestamp</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@TypeConverter</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Long</span> <span class="nf">toTimestamp</span><span class="o">(</span><span class="nc">Date</span> <span class="n">date</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">date</span> <span class="o">==</span> <span class="kc">null</span><span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="n">date</span><span class="o">.</span><span class="na">getTime</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="booleanconverter">BooleanConverter</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BooleanConverter</span> <span class="o">{</span>

    <span class="nd">@TypeConverter</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">toInteger</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">bool</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">bool</span><span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@TypeConverter</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">toBoolean</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Now let’s create our database class. The database class as mentioned above lists all the entities, the type converters as well as DAOs.</p>

<h3 id="database">Database</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Database</span><span class="o">(</span><span class="n">entities</span> <span class="o">=</span> <span class="o">{</span><span class="nc">Task</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="nc">TaskItem</span><span class="o">.</span><span class="na">class</span><span class="o">},</span> <span class="n">version</span> <span class="o">=</span> <span class="mi">1</span><span class="o">)</span>
<span class="nd">@TypeConverters</span><span class="o">({</span><span class="nc">DateConverter</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="nc">BooleanConverter</span><span class="o">.</span><span class="na">class</span><span class="o">})</span>
<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">YoTasksDb</span> <span class="kd">extends</span> <span class="nc">RoomDatabase</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">DATABASE_NAME</span> <span class="o">=</span> <span class="s">"yo-tasks-db"</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">abstract</span> <span class="nc">TaskDao</span> <span class="nf">taskDao</span><span class="o">();</span>

    <span class="kd">public</span> <span class="kd">abstract</span> <span class="nc">TaskItemDao</span> <span class="nf">taskItemDao</span><span class="o">();</span>

<span class="o">}</span>
</code></pre></div></div>

<p>The database is created using the following code:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">YoTasksDb</span> <span class="n">db</span> <span class="o">=</span> <span class="nc">Room</span><span class="o">.</span><span class="na">databaseBuilder</span><span class="o">(</span><span class="n">application</span><span class="o">,</span> <span class="nc">YoTasksDb</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="nc">YoTasksDb</span><span class="o">.</span><span class="na">DATABASE_NAME</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
</code></pre></div></div>

<p>See full implementation on <a href="https://github.com/vince-nyanga/yo-tasks">github</a>.</p>

<h1 id="summary">Summary</h1>

<p>In this post we spoke about Android Architecture Components (some of them) and discussed how they can help build an app that is free of pain. We used the Room library to create Entities, DAOs and the Database class for our task management app. In the next post we will continue to build on this foundation till we have a fully functional app. Thank you so much for taking your time to read this post.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#android" class="page__taxonomy-item" rel="tag">Android</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#architecture" class="page__taxonomy-item" rel="tag">Architecture</a>
    
    </span>
  </p>




        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2017-06-13T00:00:00+02:00">June 13, 2017</time></p>
        
      </footer>

      <section class="page__share">
  

  <a href="https://twitter.com/intent/tweet?text=Android+Architecture+Components+-+Part+1%20http%3A%2F%2Flocalhost%3A4000%2Fandroid-architecture-components-part-1%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Fandroid-architecture-components-part-1%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Fandroid-architecture-components-part-1%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/task-management-app-with-firebase-4/" class="pagination--pager" title="A simple task management app using firebase - part 4
">Previous</a>
    
    
      <a href="/android-architecture-components-part-2/" class="pagination--pager" title="Android Architecture Components - Part 2
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/creating-uml-diagrams-made-easy/" rel="permalink">Creating UML Diagrams With Ease Using PlantText
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  2 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">Unified Modeling Language (UML) has been around the software development circles for a fairly long time now. It helps provide a standardised way to visualise...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/building-resilient-applications-with-polly-part-2/" rel="permalink">Building Resilient .NET Core Applications With Polly’s Circuit Breaker Policy
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  3 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">In the previous post we introduced Polly, a .NET resilience and transient-fault-handling library. We spoke about the retry policy that can be used to help yo...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/building-resilient-applications-with-polly-part-1/" rel="permalink">Building Resilient .NET Core Applications With Polly’s Retry Policy
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  5 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">In this age of Service Oriented Architecture (SOA) where small microservices within a system communicate with each other using various protocols, typically o...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/facial-recognition-with-kairos/" rel="permalink">Facial Recognition In .NET With Kairos
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  3 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">A little over 2 years ago I worked on a project that involved facial recognition. Even though I eventually used Python for the project, I initially wanted to...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://www.linkedin.com/in/vincentnyanga/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn</a></li>
        
      
        
          <li><a href="https://github.com/vince-nyanga/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2020 Vincent Nyanga.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
