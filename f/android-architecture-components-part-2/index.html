<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.17.2 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Android Architecture Components - Part 2 | Vincent (Hones) Nyanga</title>
<meta name="description" content="Welcome to part 2 of our series on Android Architecture Components. In the previous post we introduced the components and created Entities, DAOs and Database class for our task management app. In this post, which is relatively short, we will write tests for our database to make sure everything works as expected before we proceed.">


  <meta name="author" content="Vincent Nyanga">


<meta property="og:type" content="article">
<meta property="og:locale" content="en_ZA">
<meta property="og:site_name" content="Vincent (Hones) Nyanga">
<meta property="og:title" content="Android Architecture Components - Part 2">
<meta property="og:url" content="http://localhost:4000/android-architecture-components-part-2/">


  <meta property="og:description" content="Welcome to part 2 of our series on Android Architecture Components. In the previous post we introduced the components and created Entities, DAOs and Database class for our task management app. In this post, which is relatively short, we will write tests for our database to make sure everything works as expected before we proceed.">







  <meta property="article:published_time" content="2017-06-15T00:00:00+02:00">





  

  


<link rel="canonical" href="http://localhost:4000/android-architecture-components-part-2/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Vincent Nyanga",
      "url": "http://localhost:4000/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Vincent (Hones) Nyanga Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/img/logo.png" alt=""></a>
        
        <a class="site-title" href="/">
          Vincent (Hones) Nyanga
          <span class="site-subtitle">Personal blog</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/year-archive/" >Posts</a>
            </li><li class="masthead__menu-item">
              <a href="/weekly-lessons/" >Weekly Lessons</a>
            </li><li class="masthead__menu-item">
              <a href="/about/" >About</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="https://avatars2.githubusercontent.com/u/13013852?v=3&u=0e1bc9da031c3b0fed315dcf2869b3cc38b7e232&s=400" alt="Vincent Nyanga" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Vincent Nyanga</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Software engineer</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Johannesburg, ZA</span>
        </li>
      

      
        
          
            <li><a href="https://www.linkedin.com/in/vincentnyanga/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn</a></li>
          
        
          
            <li><a href="https://github.com/vince-nyanga/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Android Architecture Components - Part 2">
    <meta itemprop="description" content="Welcome to part 2 of our series on Android Architecture Components. In the previous post we introduced the components and created Entities, DAOs and Database class for our task management app. In this post, which is relatively short, we will write tests for our database to make sure everything works as expected before we proceed.">
    <meta itemprop="datePublished" content="June 15, 2017">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Android Architecture Components - Part 2
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  3 minute read

</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>Welcome to part 2 of our series on Android Architecture Components. In the <a href="https://vince-nyanga.github.io/android-architecture-components-part-1/">previous post</a> we introduced the components and created Entities, DAOs and Database class for our task management app. In this post, which is relatively short, we will write tests for our database to make sure everything works as expected before we proceed.</p>

<h1 id="testing-database">Testing database</h1>

<p>When running tests for the database there is no need to create a full database itself. The Room library allows us to mock the data access layer in our tests. This is possible due to the fact that Data Access Objects (DAOs) don’t leak details of the database. There are two ways to test our database, which are:</p>

<ul>
  <li><strong>Test on your host development machine</strong>: Room library uses the SQLite Support Library that provides interfaces that match those in the Android Framework classes. This allows you to pass custom implementations of the support library to test your queries and also helps your tests run very quickly. However, the disadvantage of this approach is that the version of SQLite running on the users’ devices might not match the version on your host machine leading to unexpected results.</li>
  <li><strong>Test on an Android device</strong>: This is the recommended approach to testing your database implementation. The best way to do it is to write JUnit tests that run on a device. In our tests we will create an in-memory version of our database.</li>
</ul>

<h2 id="lets-get-started">Let’s get started</h2>

<p>Like I said earlier, this post is gonna be very short. We will just write tests for the <code class="highlighter-rouge">TaskDao.java</code> and <code class="highlighter-rouge">TaskItemDao.java</code> classes. Check the complete code on <a href="https://github.com/vince-nyanga/yo-tasks">github</a> since in this post I will just show the code for the tests for brevity. I have added some methods to the <code class="highlighter-rouge">TaskDao</code> and <code class="highlighter-rouge">TaskItemDao</code> to help make testing easier.</p>

<h3 id="taskdao-test">TaskDao Test</h3>

<p>Below is the code for the test for <code class="highlighter-rouge">TaskDao.java</code>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RunWith</span><span class="o">(</span><span class="nc">AndroidJUnit4</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TaskDaoTest</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">TASK_NAME</span> <span class="o">=</span>  <span class="s">"Groceries"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">NEW_TASK_NAME</span> <span class="o">=</span> <span class="s">"Shopping"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">TASK_ID</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">TaskDao</span> <span class="n">taskDao</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">YoTasksDb</span> <span class="n">db</span><span class="o">;</span>

    <span class="nd">@Before</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUp</span><span class="o">(){</span>
        <span class="nc">Context</span> <span class="n">context</span> <span class="o">=</span> <span class="nc">InstrumentationRegistry</span><span class="o">.</span><span class="na">getTargetContext</span><span class="o">();</span>
        <span class="n">db</span> <span class="o">=</span> <span class="nc">Room</span><span class="o">.</span><span class="na">inMemoryDatabaseBuilder</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="nc">YoTasksDb</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
        <span class="n">taskDao</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="na">taskDao</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@After</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">tearDown</span><span class="o">(){</span>
        <span class="n">db</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">insert</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span><span class="o">{</span>
        <span class="nc">Task</span> <span class="n">task</span> <span class="o">=</span> <span class="nc">TestUtil</span><span class="o">.</span><span class="na">createTask</span><span class="o">(</span><span class="no">TASK_NAME</span><span class="o">);</span>
        <span class="n">taskDao</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">task</span><span class="o">);</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Task</span><span class="o">&gt;</span> <span class="n">taskList</span> <span class="o">=</span> <span class="n">taskDao</span><span class="o">.</span><span class="na">loadTasksSync</span><span class="o">();</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="s">"Task list should be of size = 1"</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span><span class="n">taskList</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="s">"Task name should be "</span><span class="o">+</span><span class="no">TASK_NAME</span><span class="o">,</span><span class="no">TASK_NAME</span><span class="o">,</span> <span class="n">taskList</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="na">getName</span><span class="o">());</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="s">"Task id should be "</span> <span class="o">+</span> <span class="no">TASK_ID</span><span class="o">,</span> <span class="no">TASK_ID</span><span class="o">,</span> <span class="n">taskList</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="na">getId</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">getTaskByIdSync</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span><span class="o">{</span>
        <span class="nc">Task</span> <span class="n">task</span> <span class="o">=</span> <span class="nc">TestUtil</span><span class="o">.</span><span class="na">createTask</span><span class="o">(</span><span class="no">TASK_NAME</span><span class="o">);</span>
        <span class="n">taskDao</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">task</span><span class="o">);</span>
        <span class="n">task</span> <span class="o">=</span> <span class="n">taskDao</span><span class="o">.</span><span class="na">getTaskByIdSync</span><span class="o">(</span><span class="no">TASK_ID</span><span class="o">);</span>
        <span class="n">assertNotNull</span><span class="o">(</span><span class="n">task</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">update</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span><span class="o">{</span>
        <span class="nc">Task</span> <span class="n">task</span> <span class="o">=</span> <span class="nc">TestUtil</span><span class="o">.</span><span class="na">createTask</span><span class="o">(</span><span class="no">TASK_NAME</span><span class="o">);</span>
        <span class="n">taskDao</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">task</span><span class="o">);</span>
        <span class="n">task</span> <span class="o">=</span> <span class="n">taskDao</span><span class="o">.</span><span class="na">getTaskByIdSync</span><span class="o">(</span><span class="no">TASK_ID</span><span class="o">);</span>
        <span class="n">assertNotNull</span><span class="o">(</span><span class="n">task</span><span class="o">);</span>
        <span class="n">task</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="no">NEW_TASK_NAME</span><span class="o">);</span>
        <span class="n">taskDao</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">task</span><span class="o">);</span>

        <span class="nc">Task</span> <span class="n">updatedTask</span> <span class="o">=</span> <span class="n">taskDao</span><span class="o">.</span><span class="na">getTaskByIdSync</span><span class="o">(</span><span class="no">TASK_ID</span><span class="o">);</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="s">"Task name should be "</span><span class="o">+</span><span class="no">NEW_TASK_NAME</span><span class="o">,</span> <span class="no">NEW_TASK_NAME</span><span class="o">,</span> <span class="n">updatedTask</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="o">(){</span>
        <span class="nc">Task</span> <span class="n">task</span> <span class="o">=</span> <span class="nc">TestUtil</span><span class="o">.</span><span class="na">createTask</span><span class="o">(</span><span class="no">TASK_NAME</span><span class="o">);</span>
        <span class="n">taskDao</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">task</span><span class="o">);</span>

        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Task</span><span class="o">&gt;</span> <span class="n">taskList</span> <span class="o">=</span> <span class="n">taskDao</span><span class="o">.</span><span class="na">loadTasksSync</span><span class="o">();</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="s">"Task list should be of size = 1"</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span><span class="n">taskList</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>

        <span class="n">task</span> <span class="o">=</span> <span class="n">taskDao</span><span class="o">.</span><span class="na">getTaskByIdSync</span><span class="o">(</span><span class="no">TASK_ID</span><span class="o">);</span>
        <span class="n">taskDao</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">task</span><span class="o">);</span>
        <span class="n">taskList</span> <span class="o">=</span> <span class="n">taskDao</span><span class="o">.</span><span class="na">loadTasksSync</span><span class="o">();</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="s">"Task list should be of size = 0"</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span><span class="n">taskList</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>

    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<h3 id="taskitemdao-test">TaskItemDao Test</h3>

<p>Here is the code for the test for <code class="highlighter-rouge">TaskItemDao.java</code>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RunWith</span><span class="o">(</span><span class="nc">AndroidJUnit4</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TaskItemDaoTest</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">TASK_NAME</span> <span class="o">=</span> <span class="s">"Groceries"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">ITEM_NAME</span> <span class="o">=</span> <span class="s">"Sugar"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">ID</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">TaskItemDao</span> <span class="n">taskItemDao</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">TaskDao</span> <span class="n">taskDao</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">YoTasksDb</span> <span class="n">db</span><span class="o">;</span>

    <span class="nd">@Before</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setup</span><span class="o">(){</span>
        <span class="nc">Context</span> <span class="n">context</span> <span class="o">=</span> <span class="nc">InstrumentationRegistry</span><span class="o">.</span><span class="na">getTargetContext</span><span class="o">();</span>
        <span class="n">db</span> <span class="o">=</span> <span class="nc">Room</span><span class="o">.</span><span class="na">inMemoryDatabaseBuilder</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="nc">YoTasksDb</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
        <span class="n">taskDao</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="na">taskDao</span><span class="o">();</span>
        <span class="n">taskItemDao</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="na">taskItemDao</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@After</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">tearDown</span><span class="o">(){</span>
        <span class="n">db</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>


    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">insert</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Task</span> <span class="n">task</span> <span class="o">=</span> <span class="nc">TestUtil</span><span class="o">.</span><span class="na">createTask</span><span class="o">(</span><span class="no">TASK_NAME</span><span class="o">);</span>
        <span class="n">taskDao</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">task</span><span class="o">);</span>

        <span class="nc">TaskItem</span> <span class="n">item</span> <span class="o">=</span> <span class="nc">TestUtil</span><span class="o">.</span><span class="na">createItem</span><span class="o">(</span><span class="no">ITEM_NAME</span><span class="o">,</span> <span class="no">ID</span><span class="o">);</span>
        <span class="n">taskItemDao</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>

        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">TaskItem</span><span class="o">&gt;</span> <span class="n">taskItems</span> <span class="o">=</span> <span class="n">taskItemDao</span><span class="o">.</span><span class="na">loadItemsSync</span><span class="o">(</span><span class="no">ID</span><span class="o">);</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="s">"Task items list should be of size 1"</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="n">taskItems</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">getItemByIdSync</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Task</span> <span class="n">task</span> <span class="o">=</span> <span class="nc">TestUtil</span><span class="o">.</span><span class="na">createTask</span><span class="o">(</span><span class="no">TASK_NAME</span><span class="o">);</span>
        <span class="n">taskDao</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">task</span><span class="o">);</span>

        <span class="nc">TaskItem</span> <span class="n">item</span> <span class="o">=</span> <span class="nc">TestUtil</span><span class="o">.</span><span class="na">createItem</span><span class="o">(</span><span class="no">ITEM_NAME</span><span class="o">,</span> <span class="no">ID</span><span class="o">);</span>
        <span class="n">taskItemDao</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>

        <span class="n">item</span> <span class="o">=</span> <span class="n">taskItemDao</span><span class="o">.</span><span class="na">getItemByIdSync</span><span class="o">(</span><span class="no">ID</span><span class="o">);</span>
        <span class="n">assertNotNull</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">update</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Task</span> <span class="n">task</span> <span class="o">=</span> <span class="nc">TestUtil</span><span class="o">.</span><span class="na">createTask</span><span class="o">(</span><span class="no">TASK_NAME</span><span class="o">);</span>
        <span class="n">taskDao</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">task</span><span class="o">);</span>

        <span class="nc">TaskItem</span> <span class="n">item</span> <span class="o">=</span> <span class="nc">TestUtil</span><span class="o">.</span><span class="na">createItem</span><span class="o">(</span><span class="no">ITEM_NAME</span><span class="o">,</span> <span class="no">ID</span><span class="o">);</span>
        <span class="n">taskItemDao</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>

        <span class="n">item</span> <span class="o">=</span> <span class="n">taskItemDao</span><span class="o">.</span><span class="na">getItemByIdSync</span><span class="o">(</span><span class="no">ID</span><span class="o">);</span>
        <span class="n">assertFalse</span><span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">isDone</span><span class="o">());</span>

        <span class="n">item</span><span class="o">.</span><span class="na">setDone</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
        <span class="n">taskItemDao</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>

        <span class="n">item</span> <span class="o">=</span> <span class="n">taskItemDao</span><span class="o">.</span><span class="na">getItemByIdSync</span><span class="o">(</span><span class="no">ID</span><span class="o">);</span>
        <span class="n">assertTrue</span><span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">isDone</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Task</span> <span class="n">task</span> <span class="o">=</span> <span class="nc">TestUtil</span><span class="o">.</span><span class="na">createTask</span><span class="o">(</span><span class="no">TASK_NAME</span><span class="o">);</span>
        <span class="n">taskDao</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">task</span><span class="o">);</span>

        <span class="nc">TaskItem</span> <span class="n">item</span> <span class="o">=</span> <span class="nc">TestUtil</span><span class="o">.</span><span class="na">createItem</span><span class="o">(</span><span class="no">ITEM_NAME</span><span class="o">,</span> <span class="no">ID</span><span class="o">);</span>
        <span class="n">taskItemDao</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>

        <span class="n">item</span> <span class="o">=</span> <span class="n">taskItemDao</span><span class="o">.</span><span class="na">getItemByIdSync</span><span class="o">(</span><span class="no">ID</span><span class="o">);</span>
        <span class="n">taskItemDao</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>

        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">TaskItem</span><span class="o">&gt;</span> <span class="n">taskItems</span> <span class="o">=</span> <span class="n">taskItemDao</span><span class="o">.</span><span class="na">loadItemsSync</span><span class="o">(</span><span class="no">ID</span><span class="o">);</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="s">"Task items list should be of size 0"</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">taskItems</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<p>That’s all we need to do today. When all our tests pass we can proceed with confidence since we know we won’t have issues with our database.</p>

<h1 id="summary">Summary</h1>

<p>In this post we wrote tests for our database implementation to ensure that everything works as expected. Thanks again for taking your time to read. Happy coding!!</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#android" class="page__taxonomy-item" rel="tag">Android</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#architecture" class="page__taxonomy-item" rel="tag">Architecture</a>
    
    </span>
  </p>




        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2017-06-15T00:00:00+02:00">June 15, 2017</time></p>
        
      </footer>

      <section class="page__share">
  

  <a href="https://twitter.com/intent/tweet?text=Android+Architecture+Components+-+Part+2%20http%3A%2F%2Flocalhost%3A4000%2Fandroid-architecture-components-part-2%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Fandroid-architecture-components-part-2%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Fandroid-architecture-components-part-2%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/android-architecture-components-part-1/" class="pagination--pager" title="Android Architecture Components - Part 1
">Previous</a>
    
    
      <a href="/android-architecture-components-part-3/" class="pagination--pager" title="Android Architecture Components - Part 3
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/creating-uml-diagrams-made-easy/" rel="permalink">Creating UML Diagrams With Ease Using PlantText
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  2 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">Unified Modeling Language (UML) has been around the software development circles for a fairly long time now. It helps provide a standardised way to visualise...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/building-resilient-applications-with-polly-part-2/" rel="permalink">Building Resilient .NET Core Applications With Polly’s Circuit Breaker Policy
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  3 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">In the previous post we introduced Polly, a .NET resilience and transient-fault-handling library. We spoke about the retry policy that can be used to help yo...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/building-resilient-applications-with-polly-part-1/" rel="permalink">Building Resilient .NET Core Applications With Polly’s Retry Policy
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  5 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">In this age of Service Oriented Architecture (SOA) where small microservices within a system communicate with each other using various protocols, typically o...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/facial-recognition-with-kairos/" rel="permalink">Facial Recognition In .NET With Kairos
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  3 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">A little over 2 years ago I worked on a project that involved facial recognition. Even though I eventually used Python for the project, I initially wanted to...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://www.linkedin.com/in/vincentnyanga/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn</a></li>
        
      
        
          <li><a href="https://github.com/vince-nyanga/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2020 Vincent Nyanga.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
