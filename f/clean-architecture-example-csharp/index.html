<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.17.2 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Clean Architecture Example C# | Vincent (Hones) Nyanga</title>
<meta name="description" content="When I was still in university I failed a job interview because I did not know the architecture I was using in my project (embarrassing). Since that day I decided to learn about different software architectures and use them in all my projects.">


  <meta name="author" content="Vincent Nyanga">


<meta property="og:type" content="article">
<meta property="og:locale" content="en_ZA">
<meta property="og:site_name" content="Vincent (Hones) Nyanga">
<meta property="og:title" content="Clean Architecture Example C#">
<meta property="og:url" content="http://localhost:4000/clean-architecture-example-csharp/">


  <meta property="og:description" content="When I was still in university I failed a job interview because I did not know the architecture I was using in my project (embarrassing). Since that day I decided to learn about different software architectures and use them in all my projects.">







  <meta property="article:published_time" content="2018-04-10T00:00:00+02:00">





  

  


<link rel="canonical" href="http://localhost:4000/clean-architecture-example-csharp/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Vincent Nyanga",
      "url": "http://localhost:4000/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Vincent (Hones) Nyanga Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/img/logo.png" alt=""></a>
        
        <a class="site-title" href="/">
          Vincent (Hones) Nyanga
          <span class="site-subtitle">Personal blog</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/year-archive/" >Posts</a>
            </li><li class="masthead__menu-item">
              <a href="/weekly-lessons/" >Weekly Lessons</a>
            </li><li class="masthead__menu-item">
              <a href="/about/" >About</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="https://avatars2.githubusercontent.com/u/13013852?v=3&u=0e1bc9da031c3b0fed315dcf2869b3cc38b7e232&s=400" alt="Vincent Nyanga" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Vincent Nyanga</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Software engineer</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Johannesburg, ZA</span>
        </li>
      

      
        
          
            <li><a href="https://www.linkedin.com/in/vincentnyanga/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn</a></li>
          
        
          
            <li><a href="https://github.com/vince-nyanga/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Clean Architecture Example C#">
    <meta itemprop="description" content="When I was still in university I failed a job interview because I did not know the architecture I was using in my project (embarrassing). Since that day I decided to learn about different software architectures and use them in all my projects.">
    <meta itemprop="datePublished" content="April 10, 2018">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Clean Architecture Example C#
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  5 minute read

</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>When I was still in university I failed a job interview because I did not know the architecture I was using in my project (embarrassing). Since that day I decided to learn about different software architectures and use them in all my projects.</p>

<p>Uncle Bob’s <a href="https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html">clean architecture</a> is one of the architectures that I’ve come across and I fell in love with it. The reason why I like it is that it helps create software that is testable, independent of frameworks, UI or databases. It also enforces a rule that source code dependencies point inwards (see image below). This means that something in the inner layer cannot know about something in the outer layer.</p>

<figure>
<img src="/images/clean-architecture.jpeg" alt="Clean architecture" />
<figcaption>Clean Architecture, courtesy: Uncle Bob</figcaption>
</figure>

<p>For detailed explanation of the clean architecture check out this <a href="https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html">post</a> by Uncle Bob.</p>

<h3 id="lets-build-something">Let’s build something</h3>

<p>We are going to create a simple .Net console application that shows the weather of a given location. The complete source code is available on <a href="https://github.com/vince-nyanga/CleanArchitectureExample">GitHub</a>.
The application has three layers — domain, data and presentation layers. The image below shows how the layers depend on each other. A layer can only know about a layer below it as shown by the arrows.</p>

<figure>
<img src="/images/clean-architecture-arrows.png" alt="Clean architecture diagram" />
<figcaption>The three layers used in the weather app</figcaption>
</figure>

<h4 id="domain-layer">Domain Layer</h4>

<p>This is the bottom layer in our application. It contains the entities, use-cases and interfaces. Code in this layer is as abstract and generic as possible. I simply defines how the application should work. More ‘meat’ will be added in layers above.</p>

<h4 id="entities">Entities</h4>

<p>These are the blocks that build our application and are not affected by any external forces, that is, external changes won’t change them. In our weather app we only have one entity — <code class="highlighter-rouge">WeatherEntity</code>.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">public</span> <span class="k">class</span> <span class="nc">WeatherEntity</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">Description</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="kt">double</span> <span class="n">MinTemperature</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="kt">double</span> <span class="n">MaxTemperature</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="p">}</span>
</code></pre></div></div>

<h4 id="usecases">UseCases</h4>

<p>These are application specific business rules. Each use case (aka interactor) implements a single business use case in our system, for instance, get weather for a location. In the weather application all use cases implement a base interface <code class="highlighter-rouge">IRequestHandler</code>.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">internal</span> <span class="k">interface</span> <span class="nc">IRequestHandler</span><span class="p">&lt;</span><span class="k">in</span> <span class="n">TRequest</span><span class="p">,</span> <span class="k">out</span> <span class="n">TResponse</span><span class="p">&gt;</span>
    <span class="p">{</span>
       <span class="n">TResponse</span> <span class="nf">Handle</span><span class="p">(</span><span class="n">TRequest</span> <span class="n">data</span><span class="p">);</span>
    <span class="p">}</span>
</code></pre></div></div>

<p>Now we create out use case that gets the weather for a given location.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">public</span> <span class="k">class</span> <span class="nc">GetWeatherInteractor</span><span class="p">:</span> <span class="n">IRequestHandler</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="n">WeatherEntity</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="k">private</span> <span class="k">readonly</span> <span class="n">IRepository</span> <span class="n">_repository</span><span class="p">;</span>

        <span class="k">public</span> <span class="nf">GetWeatherInteractor</span><span class="p">(</span><span class="n">IRepository</span> <span class="n">repository</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">_repository</span> <span class="p">=</span> <span class="n">repository</span> <span class="p">??</span> <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentNullException</span><span class="p">(</span><span class="k">nameof</span><span class="p">(</span><span class="n">repository</span><span class="p">));</span>
        <span class="p">}</span>


        <span class="k">public</span> <span class="n">WeatherEntity</span> <span class="nf">Handle</span><span class="p">(</span><span class="kt">string</span> <span class="n">data</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="kt">string</span><span class="p">.</span><span class="nf">IsNullOrEmpty</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentNullException</span><span class="p">(</span><span class="k">nameof</span><span class="p">(</span><span class="n">data</span><span class="p">));</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="n">_repository</span><span class="p">.</span><span class="nf">GetWeather</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div></div>

<h4 id="interfaces">Interfaces</h4>

<p>The interfaces in our domain layer include the repository from which our application data will be loaded. It’s just a simple interface with one method.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">public</span> <span class="k">interface</span> <span class="nc">IRepository</span>
    <span class="p">{</span>
        <span class="n">WeatherEntity</span> <span class="nf">GetWeather</span><span class="p">(</span><span class="kt">string</span> <span class="n">cityName</span><span class="p">);</span>
    <span class="p">}</span>
</code></pre></div></div>

<p>The use of an interface ensures that our code is testable and also that our domain layer is independent of any implementation of the repository. The code extract below shows how handy interfaces are when writing tests.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="p">[</span><span class="n">TestFixture</span><span class="p">]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">UseCaseTests</span>
    <span class="p">{</span>

        <span class="k">private</span> <span class="k">readonly</span> <span class="n">WeatherEntity</span> <span class="n">_weather</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WeatherEntity</span>
        <span class="p">{</span>
            <span class="n">Description</span> <span class="p">=</span> <span class="s">"Cloudy"</span><span class="p">,</span>
            <span class="n">MaxTemperature</span> <span class="p">=</span> <span class="m">25</span><span class="p">,</span>
            <span class="n">MinTemperature</span> <span class="p">=</span> <span class="m">12</span>
        <span class="p">};</span>

        <span class="k">private</span> <span class="n">GetWeatherInteractor</span> <span class="n">_interactor</span><span class="p">;</span>

        <span class="p">[</span><span class="n">OneTimeSetUp</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">SetUp</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">mock</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Mock</span><span class="p">&lt;</span><span class="n">IRepository</span><span class="p">&gt;();</span>
            <span class="n">mock</span><span class="p">.</span><span class="nf">Setup</span><span class="p">(</span><span class="n">repo</span> <span class="p">=&gt;</span> <span class="n">repo</span><span class="p">.</span><span class="nf">GetWeather</span><span class="p">(</span><span class="s">"Harare"</span><span class="p">)).</span><span class="nf">Returns</span><span class="p">(</span><span class="n">_weather</span><span class="p">);</span>
            <span class="n">_interactor</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">GetWeatherInteractor</span><span class="p">(</span><span class="n">mock</span><span class="p">.</span><span class="n">Object</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Test</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">TestGetWeather</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">result</span> <span class="p">=</span> <span class="n">_interactor</span><span class="p">.</span><span class="nf">Handle</span><span class="p">(</span><span class="s">"Harare"</span><span class="p">);</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">NotNull</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">AreEqual</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">MaxTemperature</span><span class="p">,</span> <span class="n">_weather</span><span class="p">.</span><span class="n">MaxTemperature</span><span class="p">);</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">AreEqual</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">MinTemperature</span><span class="p">,</span> <span class="n">_weather</span><span class="p">.</span><span class="n">MinTemperature</span><span class="p">);</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">AreEqual</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">Description</span><span class="p">,</span> <span class="n">_weather</span><span class="p">.</span><span class="n">Description</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="data-layer">Data layer</h4>

<p>This layer is responsible for handling our application data. It contains implementations of the data interfaces defined in the domain layer. The data layer may also have entities specific to it as determined by the data providers used as seen in this example. Let’s create the implementation of our repository.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">public</span> <span class="k">class</span> <span class="nc">WeatherRepository</span><span class="p">:</span> <span class="n">IRepository</span>
    <span class="p">{</span>
        <span class="k">private</span> <span class="k">readonly</span> <span class="n">IWeatherApi</span> <span class="n">_api</span><span class="p">;</span>
        <span class="k">private</span> <span class="k">readonly</span> <span class="n">IMapper</span><span class="p">&lt;</span><span class="n">WeatherData</span><span class="p">,</span> <span class="n">WeatherEntity</span><span class="p">&gt;</span> <span class="n">_mapper</span><span class="p">;</span>

        <span class="k">public</span> <span class="nf">WeatherRepository</span><span class="p">(</span><span class="n">IWeatherApi</span> <span class="n">api</span><span class="p">,</span><span class="n">IMapper</span><span class="p">&lt;</span><span class="n">WeatherData</span><span class="p">,</span> <span class="n">WeatherEntity</span><span class="p">&gt;</span> <span class="n">mapper</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">_api</span> <span class="p">=</span> <span class="n">api</span> <span class="p">??</span> <span class="k">throw</span> <span class="k">new</span> <span class="n">System</span><span class="p">.</span><span class="nf">ArgumentNullException</span><span class="p">(</span><span class="k">nameof</span><span class="p">(</span><span class="n">api</span><span class="p">));</span>
            <span class="n">_mapper</span> <span class="p">=</span> <span class="n">mapper</span> <span class="p">??</span> <span class="k">throw</span> <span class="k">new</span> <span class="n">System</span><span class="p">.</span><span class="nf">ArgumentNullException</span><span class="p">(</span><span class="k">nameof</span><span class="p">(</span><span class="n">mapper</span><span class="p">));</span>
        <span class="p">}</span>


        <span class="k">public</span> <span class="n">WeatherEntity</span> <span class="nf">GetWeather</span><span class="p">(</span><span class="kt">string</span> <span class="n">cityName</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="kt">string</span><span class="p">.</span><span class="nf">IsNullOrEmpty</span><span class="p">(</span><span class="n">cityName</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="n">System</span><span class="p">.</span><span class="nf">ArgumentNullException</span><span class="p">(</span><span class="k">nameof</span><span class="p">(</span><span class="n">cityName</span><span class="p">));</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="n">_mapper</span><span class="p">.</span><span class="nf">MapFrom</span><span class="p">(</span><span class="n">_api</span><span class="p">.</span><span class="nf">GetWeatherData</span><span class="p">(</span><span class="n">cityName</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div></div>

<h4 id="mappers">Mappers</h4>

<p>You may have noticed that our weather repository takes in an IMapper interface. This is a simple interface that maps one object to another. The reason behind the use of this interface is that the data we get in the data layer may not look anything close to the entities defined in the domain layer. This then means we will have to convert the data we get into our domain entities. In our case we get our weather data from <a href="https://openweathermap.org/">openweathermap</a> and it comes back as a completely different object from our domain entity hence the need for a mapper.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">public</span> <span class="k">class</span> <span class="nc">WeatherDataEntityMapper</span><span class="p">:</span> <span class="n">IMapper</span><span class="p">&lt;</span><span class="n">WeatherData</span><span class="p">,</span> <span class="n">WeatherEntity</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">WeatherEntity</span> <span class="nf">MapFrom</span><span class="p">(</span><span class="n">WeatherData</span> <span class="n">input</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">input</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="n">System</span><span class="p">.</span><span class="nf">ArgumentNullException</span><span class="p">(</span><span class="k">nameof</span><span class="p">(</span><span class="n">input</span><span class="p">));</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="k">new</span> <span class="n">WeatherEntity</span>
            <span class="p">{</span>
                <span class="n">MinTemperature</span> <span class="p">=</span> <span class="n">input</span><span class="p">.</span><span class="n">Main</span><span class="p">.</span><span class="n">MinTemperature</span><span class="p">,</span>
                <span class="n">MaxTemperature</span> <span class="p">=</span> <span class="n">input</span><span class="p">.</span><span class="n">Main</span><span class="p">.</span><span class="n">MaxTemperature</span><span class="p">,</span>
                <span class="n">Description</span> <span class="p">=</span> <span class="n">input</span><span class="p">.</span><span class="n">WeatherList</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">Description</span>
            <span class="p">};</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div></div>

<h4 id="presentation-layer">Presentation layer</h4>

<p>This is the upper most layer in out application. It is responsible wiring everything together as well as interact with the user. In this layer we initialize and hook up all the objects. We will use dependency injection using NInject. Note this layer may have an architecture of its own (MVP, MVC, MVVM etc.). Since everything is decoupled the presentation layer can be a mobile app, web app or anything really without us changing anything in the layers below it. In this case it is a simple console application.
Let’s create a module for our dependency injection.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">public</span> <span class="k">class</span> <span class="nc">WeatherModule</span><span class="p">:</span> <span class="n">NinjectModule</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Load</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">apiKey</span> <span class="p">=</span> <span class="n">ConfigurationManager</span><span class="p">.</span><span class="n">AppSettings</span><span class="p">[</span><span class="s">"API_KEY"</span><span class="p">];</span>
            <span class="n">Bind</span><span class="p">&lt;</span><span class="n">IMapper</span><span class="p">&lt;</span><span class="n">WeatherData</span><span class="p">,</span> <span class="n">WeatherEntity</span><span class="p">&gt;&gt;().</span><span class="n">To</span><span class="p">&lt;</span><span class="n">WeatherDataEntityMapper</span><span class="p">&gt;();</span>
            <span class="n">Bind</span><span class="p">&lt;</span><span class="n">IWeatherApi</span><span class="p">&gt;().</span><span class="n">To</span><span class="p">&lt;</span><span class="n">OpenWeatherApi</span><span class="p">&gt;().</span><span class="nf">WithConstructorArgument</span><span class="p">(</span><span class="s">"apiKey"</span><span class="p">,</span><span class="n">apiKey</span><span class="p">);</span>
            <span class="n">Bind</span><span class="p">&lt;</span><span class="n">IRepository</span><span class="p">&gt;().</span><span class="n">To</span><span class="p">&lt;</span><span class="n">WeatherRepository</span><span class="p">&gt;();</span>
            <span class="n">Bind</span><span class="p">&lt;</span><span class="n">GetWeatherInteractor</span><span class="p">&gt;().</span><span class="nf">ToSelf</span><span class="p">().</span><span class="nf">InSingletonScope</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div></div>

<p>Let’s get the weather :)</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">internal</span> <span class="k">class</span> <span class="nc">Program</span>
    <span class="p">{</span>
        <span class="k">private</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>

            <span class="n">IKernel</span> <span class="n">kernel</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StandardKernel</span><span class="p">(</span><span class="k">new</span> <span class="nf">WeatherModule</span><span class="p">());</span>
            <span class="kt">var</span> <span class="n">useCase</span> <span class="p">=</span> <span class="n">kernel</span><span class="p">.</span><span class="n">Get</span><span class="p">&lt;</span><span class="n">GetWeatherInteractor</span><span class="p">&gt;();</span>
            <span class="k">const</span> <span class="kt">string</span> <span class="n">city</span> <span class="p">=</span> <span class="s">"Johannesburg"</span><span class="p">;</span>
            <span class="kt">var</span> <span class="n">weather</span> <span class="p">=</span> <span class="n">useCase</span><span class="p">.</span><span class="nf">Handle</span><span class="p">(</span><span class="n">city</span><span class="p">);</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Weather for </span><span class="p">{</span><span class="n">city</span><span class="p">}</span><span class="s">:"</span><span class="p">);</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Description: </span><span class="p">{</span><span class="n">weather</span><span class="p">.</span><span class="n">Description</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Min Temp: </span><span class="p">{</span><span class="n">weather</span><span class="p">.</span><span class="n">MinTemperature</span><span class="p">}</span><span class="s">°C"</span><span class="p">);</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Max Temp: </span><span class="p">{</span><span class="n">weather</span><span class="p">.</span><span class="n">MaxTemperature</span><span class="p">}</span><span class="s">°C"</span><span class="p">);</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">ReadLine</span><span class="p">();</span>

        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div></div>

<h3 id="summary">Summary</h3>

<p>In this post we have created a simple console application that gets the weather for a given city using The Clean Architecture. This architecture has many advantages including building software that is testable and independent of frameworks.</p>

<p>The complete source code is available on <a href="https://github.com/vince-nyanga/CleanArchitectureExample">GitHub</a>. Once again, thanks for reading.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#architecture" class="page__taxonomy-item" rel="tag">Architecture</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#c" class="page__taxonomy-item" rel="tag">C#</a>
    
    </span>
  </p>




        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2018-04-10T00:00:00+02:00">April 10, 2018</time></p>
        
      </footer>

      <section class="page__share">
  

  <a href="https://twitter.com/intent/tweet?text=Clean+Architecture+Example+C%23%20http%3A%2F%2Flocalhost%3A4000%2Fclean-architecture-example-csharp%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Fclean-architecture-example-csharp%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Fclean-architecture-example-csharp%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/a-look-into-the-aac-paging-library/" class="pagination--pager" title="A look into the Android Architecture Components Paging Library
">Previous</a>
    
    
      <a href="/mocking-objects-in-python/" class="pagination--pager" title="Mocking objects in Python
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/creating-uml-diagrams-made-easy/" rel="permalink">Creating UML Diagrams With Ease Using PlantText
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  2 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">Unified Modeling Language (UML) has been around the software development circles for a fairly long time now. It helps provide a standardised way to visualise...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/building-resilient-applications-with-polly-part-2/" rel="permalink">Building Resilient .NET Core Applications With Polly’s Circuit Breaker Policy
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  3 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">In the previous post we introduced Polly, a .NET resilience and transient-fault-handling library. We spoke about the retry policy that can be used to help yo...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/building-resilient-applications-with-polly-part-1/" rel="permalink">Building Resilient .NET Core Applications With Polly’s Retry Policy
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  5 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">In this age of Service Oriented Architecture (SOA) where small microservices within a system communicate with each other using various protocols, typically o...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/facial-recognition-with-kairos/" rel="permalink">Facial Recognition In .NET With Kairos
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  3 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">A little over 2 years ago I worked on a project that involved facial recognition. Even though I eventually used Python for the project, I initially wanted to...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://www.linkedin.com/in/vincentnyanga/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn</a></li>
        
      
        
          <li><a href="https://github.com/vince-nyanga/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2020 Vincent Nyanga.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
